"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var Register=function(){function e(){_classCallCheck(this,e),this.phoneEvent(),this.signEvent(),this.arr=[!1,!1,!1,!1]}return _createClass(e,[{key:"phoneEvent",value:function(){this.addPhone();var t=this;$(".account-node-btn").on("click",function(){$(".codelook").css("display","block");var e=t.randomCode();$(".codelook").text(e),$(".codelook").css("color",t.randomColor()),$(".account-note").on("blur",function(){$(".codelook").css("display","none"),$(this).val()==$(".codelook").text()?($(".account-node-btn").next().text("验证成功"),t.arr[1]=!0,console.log("arr[1]=true"),$("#psws").on("blur",function(){$(this).val()?/^\d{5,10}$/.test(parseInt($(this).val()))?($(this).next().text("正确"),t.arr[2]=!0,console.log("arr[2]=true")):($(this).next().text("密码格式不正确"),t.arr[2]=!1):$(this).next().text("请输入你的密码")})):(alert("验证码不正确"),t.arr[1]=!1)})}),$("#sure").on("blur",function(){var e;$(this).val()?(e=parseInt($("#psws").val()),console.log(e),$(this).val()==e?($(this).next().text("正确"),t.arr[3]=!0,console.log("arr[3]=true")):($(this).next().text("与原密码不符"),t.arr[3]=!1)):$(this).next().text("请再次输入密码")})}},{key:"addPhone",value:function(){var o=this;$("#phone").on("blur",function(){var e=$(this).val();if(e){/^1\d{10}/.test(e)?($(this).next().text("正确"),o.arr[0]=!0,console.log("arr[0]=true")):($(this).next().text("手机号格式不正确"),o.arr[0]=!1);var t=$.cookie("registers")?$.cookie("registers"):"",r=convertStrToObj(t);if(r){if(e in r)return alert("手机号已存在！"),void(o.arr[0]=!1);o.arr[0]=!0,console.log("arr[0]=true")}}else $(this).next().text("请输入手机号")})}},{key:"randomCode",value:function(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t="",r=0;r<6;r++){t+=e[parseInt(Math.random()*e.length)]}return t}},{key:"randomColor",value:function(){for(var e="#",t="0123456789ABCDEFabcdef",r=0;r<6;r++){e+=t[parseInt(Math.random()*t.length)]}return e}},{key:"signEvent",value:function(){var n=this;$("#sub").on("click",function(){var e,t,r,o;console.log(n.arr),-1===n.arr.indexOf(!1)&&(e=$("#phone").val(),t=$("#psws").val(),r=$.cookie("registers")?$.cookie("registers"):"",(o=convertStrToObj(r))[e]=t,console.log(o),$.cookie("registers",JSON.stringify(o),{expires:7,path:"/"}),alert("注册成功！"),location.href="./login.html")})}}]),e}();